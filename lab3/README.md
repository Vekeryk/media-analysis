### AWS Resources

- **S3 Bucket**: `media-labs-audio-transcribe` (reused from Lab 2)
- **S3 Object**: `audio/lab3.wav`
- **Transcribe Job**: Auto-generated with timestamp

## Setup

### Environment

```bash
source ../venv/bin/activate
```

### Install NLP Models

```bash
# VADER sentiment lexicon (auto-downloaded)
# spaCy English model
python -m spacy download en_core_web_sm
```

## Usage

```bash
python audio_analysis.py --audio-source <audio_file> --phrase <searched_phrase>
```

### Examples

```bash
# Search for "rocket"
python audio_analysis.py --audio-source lab3.wav --phrase "rocket"

# Search for "NASA"
python audio_analysis.py --audio-source lab3.wav --phrase "NASA"

# Search for phrase not in text
python audio_analysis.py --audio-source lab3.wav --phrase "satellite"
```

## How It Works

### Pipeline Steps

#### 1. Transcription (AWS Transcribe)

```python
self.transcribe.start_transcription_job(
    TranscriptionJobName=job_name,
    Media={'MediaFileUri': s3_uri},
    MediaFormat='wav',
    IdentifyLanguage=True,
    LanguageOptions=['en-US', 'uk-UA', 'pl-PL', 'de-DE', 'fr-FR']
)
```

Automatic language detection with confidence scores.

#### 2. Language Detection (langdetect)

```python
langs = detect_langs(text)
primary_lang = langs[0]
```

Returns language code and confidence percentage.

#### 3. Sentiment Analysis (NLTK VADER)

```python
scores = self.sia.polarity_scores(text)
# Returns: pos, neu, neg, compound scores
# Sentiment: Positive if compound >= 0.05
#            Negative if compound <= -0.05
#            Neutral otherwise
```

VADER is specifically designed for social media and short texts.

#### 4. Phrase Search + NER (spaCy)

```python
# Case-insensitive phrase search
if phrase_lower in text_lower:
    position = text_lower.index(phrase_lower)

# Named Entity Recognition
doc = self.nlp(text)
entities = [(ent.text, ent.label_) for ent in doc.ents]
```

spaCy recognizes entities like ORG, PERSON, GPE, DATE, etc.

## Results

### Test Audio

**Content**: "NASA has launched a new rocket. It was fantastic."
**Source**: Google Text-to-Speech (gTTS)
**Duration**: ~3 seconds
**Format**: WAV

### Test 1: Search for "rocket"

```
Transcription: NASA has launched a new rocket. It was fantastic.
Language: en (100.00% confidence)
Sentiment: Positive (compound=0.625)
Phrase Found at position: 24
Named entities: NASA (ORG)
```

### Test 2: Search for "NASA"

```
Transcription: NASA has launched a new rocket. It was fantastic.
Language: en (100.00% confidence)
Sentiment: Positive (compound=0.625)
Phrase Found at position: 0
Named entities: NASA (ORG)
```

### Test 3: Search for "satellite" (not in text)

```
Transcription: NASA has launched a new rocket. It was fantastic.
Language: en (100.00% confidence)
Sentiment: Positive (compound=0.625)
Phrase Not found
Named entities: NASA (ORG)
```

## Analysis Breakdown

### Transcription Accuracy

AWS Transcribe correctly identified:

- ✓ Language: en-US (99.99% confidence)
- ✓ All words: "NASA", "has", "launched", "a", "new", "rocket", "It", "was", "fantastic"
- ✓ Punctuation: period after "rocket" and "fantastic"

### Language Detection

langdetect confirmed: **English** with 100% confidence

Both AWS and langdetect agree!

### Sentiment Analysis

**Positive sentiment** (compound=0.625)

Breakdown:

- Positive: 45.9% (word "fantastic" contributes)
- Neutral: 54.1%
- Negative: 0.0%

The word "fantastic" is strongly positive, resulting in overall positive sentiment.

### Named Entity Recognition

**NASA** identified as **ORG** (Organization)

spaCy correctly recognizes NASA as an organizational entity.

## Generated Files

```
audio_analysis.py          # Main script (8.5 KB)
lab3.wav                   # Test audio (generated by gTTS)
analysis_result.json       # Full analysis results
README.md                  # This file
task.txt                   # Original task
```

## NLP Libraries Used

### 1. NLTK (Natural Language Toolkit)

**Purpose**: Sentiment analysis
**Component**: VADER (Valence Aware Dictionary and sEntiment Reasoner)
**Why**: Specifically tuned for social media and short texts

### 2. spaCy

**Purpose**: Named Entity Recognition
**Model**: en_core_web_sm (English, small model)
**Entities**: ORG, PERSON, GPE, DATE, MONEY, etc.

### 3. langdetect

**Purpose**: Language detection
**Method**: Statistical analysis based on character n-grams
**Accuracy**: High for texts > 20 characters
